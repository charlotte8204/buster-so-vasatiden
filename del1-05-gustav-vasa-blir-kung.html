<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gustav Vasa blir kung - Vasatiden</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f1f5f9;--card:#fff;--text:#1e293b;--muted:#64748b;--accent:#2563eb;--success:#16a34a;--danger:#dc2626;--warning:#f59e0b;--sidebar-bg:#1e293b;--sidebar-text:#e2e8f0;--concept:#2563eb;--fact:#16a34a;--person:#dc2626;--funfact:#f59e0b;--radius:10px;--shadow:0 2px 12px rgba(0,0,0,.08)}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:18px;line-height:1.7;color:var(--text);background:var(--bg);display:flex;min-height:100vh}
.sidebar{width:220px;background:var(--sidebar-bg);color:var(--sidebar-text);padding:20px 0;flex-shrink:0;display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;overflow-y:auto}
.sidebar .logo{padding:0 16px 16px;font-weight:800;font-size:1.1em;border-bottom:1px solid #334155}.sidebar .logo a{color:var(--sidebar-text);text-decoration:none}
.sidebar nav{padding:12px 0;flex:1}
.sidebar .section-title{padding:8px 16px;font-size:.7em;text-transform:uppercase;letter-spacing:1px;color:#94a3b8;margin-top:8px}
.sidebar a{display:flex;align-items:center;gap:8px;padding:7px 16px;color:#cbd5e1;text-decoration:none;font-size:.85em;transition:background .15s}
.sidebar a:hover{background:#334155}.sidebar a.active{background:var(--accent);color:#fff;font-weight:600}.sidebar a.done .icon{color:var(--success)}
.sidebar .progress-box{padding:12px 16px;border-top:1px solid #334155;margin-top:auto}
.sidebar .progress-box .bar{height:6px;background:#334155;border-radius:3px;overflow:hidden;margin-top:6px}
.sidebar .progress-box .bar-fill{height:100%;background:var(--success);border-radius:3px;transition:width .3s}
.sidebar .progress-box span{font-size:.7em;color:#94a3b8}
.main{margin-left:220px;flex:1;display:flex;flex-direction:column;min-height:100vh}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 28px;background:var(--card);border-bottom:1px solid #e2e8f0}
.topbar .breadcrumb{font-size:.8em;color:var(--muted)}.topbar .breadcrumb a{color:var(--accent);text-decoration:none}
.topbar .points{font-weight:700;color:var(--warning);font-size:.95em}
.topbar .text-controls button{background:none;border:1px solid #e2e8f0;border-radius:4px;padding:2px 8px;cursor:pointer;font-size:.8em;margin-left:4px}
.content-area{flex:1;display:flex}.content{flex:1;padding:28px 32px;max-width:680px}
.content h1{font-size:1.5em;font-weight:800;margin-bottom:4px;color:var(--sidebar-bg)}
.content .subtitle{font-size:.85em;color:var(--muted);margin-bottom:20px}
.content p{margin-bottom:14px}
.term{color:var(--concept);font-weight:700;cursor:help;border-bottom:2px dotted var(--concept);position:relative}
.term:hover::after{content:attr(data-def);position:absolute;bottom:100%;left:0;background:var(--sidebar-bg);color:#fff;padding:8px 12px;border-radius:6px;font-size:.8em;font-weight:400;width:240px;z-index:10;line-height:1.4}
.fact{color:var(--fact);font-weight:600}.person{color:var(--person);font-weight:600}.year{color:var(--danger);font-weight:700}
.fun-fact{background:#fefce8;border-left:4px solid var(--warning);padding:12px 16px;border-radius:0 var(--radius) var(--radius) 0;margin:16px 0;font-size:.9em}

.question-box{background:var(--card);border:2px solid #e2e8f0;border-radius:var(--radius);padding:20px;margin:20px 0;box-shadow:var(--shadow)}
.question-box h3{font-size:.95em;margin-bottom:12px}
.badge{display:inline-block;font-size:.65em;padding:2px 8px;border-radius:4px;font-weight:700;margin-bottom:8px;text-transform:uppercase}
.badge-c{background:#dbeafe;color:var(--accent)}
.badge-a{background:#fef3c7;color:#92400e}
.options{display:flex;flex-direction:column;gap:8px}
.option-btn{display:block;width:100%;text-align:left;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;background:var(--card);cursor:pointer;font-size:.9em;font-family:inherit;transition:border-color .15s,background .15s}
.option-btn:hover:not(:disabled){border-color:var(--accent);background:#f0f6ff}
.option-btn.correct{border-color:var(--success);background:#dcfce7}
.option-btn.wrong{border-color:var(--danger);background:#fee2e2}
.option-btn:disabled{cursor:default}
.feedback{margin-top:12px;padding:12px 16px;border-radius:8px;font-size:.9em;display:none}
.feedback.show{display:block}
.feedback.correct{background:#dcfce7;color:#166534}
.feedback.wrong{background:#fee2e2;color:#991b1b}
.hint-btn{background:none;border:none;color:var(--accent);cursor:pointer;font-size:.8em;margin-top:8px;font-family:inherit;text-decoration:underline}
.hint-box{margin-top:8px;padding:8px 12px;background:#f0f6ff;border-radius:6px;font-size:.85em;display:none}.hint-box.show{display:block}
.nav-buttons{display:flex;justify-content:space-between;align-items:center;margin-top:24px;padding-top:16px;border-top:1px solid #e2e8f0}
.nav-btn{padding:10px 24px;border-radius:8px;font-size:.9em;font-weight:600;cursor:pointer;font-family:inherit;text-decoration:none;border:none;display:inline-flex;align-items:center;gap:6px}
.nav-btn.secondary{background:#f1f5f9;color:var(--text)}.nav-btn.secondary:hover{background:#e2e8f0}
.nav-btn.primary{background:var(--accent);color:#fff;box-shadow:0 2px 8px rgba(37,99,235,.25)}.nav-btn.primary:hover{background:#1d4ed8}
.nav-btn.locked{opacity:.35;cursor:not-allowed;pointer-events:none}
.celebration{display:none;text-align:center;padding:12px;margin-top:12px;background:linear-gradient(135deg,#dcfce7,#dbeafe);border-radius:var(--radius);font-weight:600}.celebration.show{display:block}
.right-panel{width:200px;padding:20px 14px;flex-shrink:0}
.tip-card{background:#fffacd;border-radius:5px;padding:18px 15px;box-shadow:3px 3px 10px rgba(0,0,0,0.1),0 0 0 1px rgba(0,0,0,0.05);transform:rotate(-2deg);position:relative;margin-bottom:20px;margin-top:12px}
.tip-card::before{content:"";position:absolute;top:-8px;left:50%;transform:translateX(-50%);width:40px;height:15px;background:rgba(200,180,140,0.6);border-radius:2px}
.tip-card h4{font-size:13px;font-weight:600;color:#7a6a4a;margin-bottom:10px;text-transform:none;letter-spacing:normal}
.tip-card p{font-size:12px;line-height:1.5;color:#6a5a3a}
.pause-btn{position:fixed;bottom:30px;right:30px;background:#c8f0d0;border:none;padding:15px 25px;border-radius:30px;font-family:inherit;font-size:15px;color:var(--text);cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,0.1);transition:all 0.2s ease;z-index:50}
.pause-btn:hover{transform:scale(1.05);background:#88c498}
.pause-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:100;align-items:center;justify-content:center}.pause-overlay.show{display:flex}
.pause-modal{background:var(--card);border-radius:16px;padding:36px;text-align:center;max-width:380px;box-shadow:0 20px 60px rgba(0,0,0,.2)}
.pause-modal h2{font-size:1.3em;margin-bottom:12px}.pause-modal p{font-size:.95em;color:var(--muted);margin-bottom:20px}
.pause-modal button{padding:12px 28px;background:var(--accent);color:#fff;border:none;border-radius:8px;font-size:1em;cursor:pointer;font-family:inherit;font-weight:600}
@media(max-width:960px){.sidebar{width:180px}.main{margin-left:180px}.right-panel{width:170px}}
@media(max-width:768px){.sidebar{display:none}.main{margin-left:0}.right-panel{display:none}.content{padding:20px}}
</style>
</head>
<body>
<div class="sidebar">
  <div class="logo"><a href="index.html">Vasatiden</a></div>
  <nav>
    <div class="section-title">Del 1: Striden om Sverige</div>
    <a href="del1-01-kalmarunionen.html" id="nav-del1-01"><span class="icon">&#9675;</span> Kalmarunionen</a>
    <a href="del1-02-maktkampen.html" id="nav-del1-02"><span class="icon">&#9675;</span> Maktkampen</a>
    <a href="del1-03-kristina-gyllenstierna.html" id="nav-del1-03"><span class="icon">&#9675;</span> Kristina Gyllenstierna</a>
    <a href="del1-04-stockholms-blodbad.html" id="nav-del1-04"><span class="icon">&#9675;</span> Stockholms blodbad</a>
    <a href="del1-05-gustav-vasa-blir-kung.html" class="active" id="nav-del1-05"><span class="icon">&#9654;</span> Gustav Vasa blir kung</a>
    <a href="del1-quiz.html" id="nav-del1-quiz"><span class="icon">&#9675;</span> Quiz: Del 1</a>
  </nav>
  <div class="progress-box">
    <span>Del 1: <span id="progressText">0/6</span></span>
    <div class="bar"><div class="bar-fill" id="progressBar" style="width:0%"></div></div>
  </div>
</div>

<div class="main">
  <div class="topbar">
    <div class="breadcrumb"><a href="index.html">Vasatiden</a> &rsaquo; Del 1 &rsaquo; Gustav Vasa blir kung</div>
    <div style="display:flex;align-items:center;gap:12px">
      <div class="text-controls"><button onclick="changeSize(-1)">A-</button><button onclick="changeSize(1)">A+</button></div>
      <div class="points" id="pointsDisplay">0 p</div>
    </div>
  </div>

  <div class="content-area">
    <div class="content" id="contentArea">
      <div class="subtitle">Del 1 &middot; Sida 5 av 5</div>
      <h1>Gustav Vasa blir kung</h1>

      <p>
        N칛r nyheten om Stockholms blodbad spreds blev folk rasande.
        En ung adelsman vid namn <span class="person">Gustav Eriksson</span> (senare kallad <span class="person">Gustav Vasa</span>)
        hade flytt fr친n <span class="person">Kristians</span> f칛ngelse i Danmark och tagit sig hela v칛gen till Dalarna.
      </p>

      <p>
        D칛r 칬vertalade han <span class="fact">dalabonderna att g칬ra uppror</span>.
        Det var inte l칛tt &ndash; bonderna var f칬rst tveksamma.
        Men Gustav var en m칛stare p친 att tala och 칬vertyga folk.
      </p>

      <p>
        Upproret v칛xte snabbt. Bonderna besegrade de danska trupperna.
        Den <span class="year">6 juni 1523</span> valdes <span class="person">Gustav Vasa</span> till
        <span class="fact">Sveriges kung</span> &ndash; och Kalmarunionen var 칬ver f칬r gott.
      </p>

      <div class="fun-fact">
        <strong>Visste du?</strong> Den 6 juni firas idag som <strong>Sveriges nationaldag</strong> &ndash;
        just f칬r att det var dagen d친 Gustav Vasa valdes till kung!
        Och Gustav Vasas riktiga namn var egentligen Gustav Eriksson.
        Han kallades aldrig "Vasa" under sin livstid.
      </div>

      <!-- QUESTION: C-level multiple choice -->
      <div class="question-box" id="questionBox">
        <span class="badge badge-c">Niv친 C</span>
        <h3>Vilken var den viktigaste konsekvensen av Stockholms blodbad?</h3>
        <div class="options">
          <button class="option-btn" onclick="answer(0)">Att Kristian fick mer makt 칬ver Sverige</button>
          <button class="option-btn" onclick="answer(1)">Att Sverige blev en del av Danmark f칬r alltid</button>
          <button class="option-btn" onclick="answer(2)">Att det skapade s친 starkt motst친nd att Sverige till slut br칬t sig fritt fr친n unionen</button>
        </div>
        <button class="hint-btn" onclick="showHint(0)">Ledtr친d</button>
        <div class="hint-box" id="hint0">T칛nk p친 Kristians plan &ndash; ville han skr칛mma folk till lydnad. Fick han det resultatet?</div>
        <div class="feedback correct" id="fbCorrect">Exakt! Blodbadet hade MOTSATT effekt fr친n vad Kristian ville. Ist칛llet f칬r lydnad fick han uppror &ndash; och Sverige blev fritt. Det kallas ibland f칬r en "oavsiktlig konsekvens".</div>
        <div class="feedback wrong" id="fbWrong">T칛nk igen. Blev Sverige mer lydigt efter blodbadet &ndash; eller mer argt?</div>
      </div>

      <div class="celebration" id="celebration">Buster, du har klarat alla 5 sidor i Del 1!</div>

      <div class="nav-buttons">
        <a href="del1-04-stockholms-blodbad.html" class="nav-btn secondary">&larr; Stockholms blodbad</a>
        <a href="del1-quiz.html" class="nav-btn primary locked" id="nextBtn" style="background:var(--success)">Quiz: Del 1 &rarr;</a>
      </div>
    </div>

    <div class="right-panel">
      <div class="tip-card">
        <h4>游닇 Tips till Buster</h4>
        <p>"Konsekvens" = vad som H츿NDER som resultat av n친gon. Kristians plan slog fullst칛ndigt fel. Det 칛r orsak-verkan!</p>
      </div>
      <div class="tip-card">
  <h4>游꿛 F칛rgkodning</h4>
  <p><span style="color:var(--concept);font-weight:700">Bl친</span> = Viktiga begrepp<br>
  <span style="color:var(--fact);font-weight:700">Gr칬n</span> = Viktiga fakta<br>
  <span style="color:var(--person);font-weight:700">R칬d</span> = 칀rtal &amp; personer<br>
  <span style="color:var(--funfact);font-weight:700">Gul</span> = Kul fakta</p>
</div>
      <div class="tip-card">
        <h4>N칛sta steg</h4>
        <p>Efter denna sida &ndash; quiz p친 hela Del 1! Du har inte tillg친ng till texterna under quizzen.</p>
      </div>
    </div>
  </div>
</div>

<button class="pause-btn" onclick="showPause()">游븾 Jag beh칬ver en paus</button>
<div class="pause-overlay" id="pauseOverlay">
  <div class="pause-modal">
    <h2 id="pauseTitle">Pausdags!</h2>
    <p id="pauseMsg">Str칛cka p친 dig!</p>
    <button onclick="closePause()">Jag 칛r redo igen!</button>
  </div>
</div>

<script>
const PREFIX='buster-vasatiden-';
const PAGE_ID='del1-05';
const CORRECT_ANSWER=2;
let answered=false;
let hintsUsed=0;
let attempts=0;
let startTime=Date.now();

function getPoints(){return parseInt(localStorage.getItem(PREFIX+'points')||'0')}
function addPoints(n){const p=getPoints()+n;localStorage.setItem(PREFIX+'points',p.toString());updatePointsDisplay();return p;}
function updatePointsDisplay(){document.getElementById('pointsDisplay').textContent=getPoints()+' p';}
function getProgress(){return JSON.parse(localStorage.getItem(PREFIX+'progress')||'{}')}
function markComplete(){const p=getProgress();p[PAGE_ID]=true;localStorage.setItem(PREFIX+'progress',JSON.stringify(p));updateNav();}
function saveStats(correct,pts){
  const stats=JSON.parse(localStorage.getItem(PREFIX+'pageStats')||'{}');
  stats[PAGE_ID]={time:Math.round((Date.now()-startTime)/1000),hints:hintsUsed,attempts:attempts,correct:correct,points:pts,timestamp:new Date().toISOString()};
  localStorage.setItem(PREFIX+'pageStats',JSON.stringify(stats));
}

function answer(idx){
  if(answered)return;
  attempts++;
  const btns=document.querySelectorAll('.option-btn');
  if(idx===CORRECT_ANSWER){
    answered=true;
    btns[idx].classList.add('correct');
    btns.forEach(b=>b.disabled=true);
    document.getElementById('fbCorrect').classList.add('show');
    const pts=hintsUsed>0?5:10;
    addPoints(pts);
    document.querySelector('.celebration').textContent='Alla 5 sidor klara! +'+pts+' po칛ng. Redo f칬r quizzen?';
    document.querySelector('.celebration').classList.add('show');
    document.getElementById('nextBtn').classList.remove('locked');
    markComplete();
    saveStats(true,pts);
  } else {
    btns[idx].classList.add('wrong');
    btns[idx].disabled=true;
    document.getElementById('fbWrong').classList.add('show');
    setTimeout(()=>document.getElementById('fbWrong').classList.remove('show'),2500);
  }
}

function showHint(n){hintsUsed++;document.getElementById('hint'+n).classList.add('show');}

function updateNav(){
  const progress=getProgress();const pages=['del1-01','del1-02','del1-03','del1-04','del1-05','del1-quiz'];let done=0;
  pages.forEach(p=>{const el=document.getElementById('nav-'+p);if(el&&progress[p]){el.classList.add('done');el.querySelector('.icon').innerHTML='&#10003;';done++;}});
  document.getElementById('progressText').textContent=done+'/'+pages.length;
  document.getElementById('progressBar').style.width=Math.round(done/pages.length*100)+'%';
}
function changeSize(d){const el=document.getElementById('contentArea');el.style.fontSize=(parseFloat(getComputedStyle(el).fontSize)+d*2)+'px';}
const pauseMsgs=[{t:'R칬r p친 dig!',m:'G칬r 10 armh칛vningar!'},{t:'Andas!',m:'Djupa andetag i 30 sekunder.'},{t:'Kolla ut!',m:'Titta ut genom f칬nstret.'},{t:'Geografi!',m:'Kan du n칛mna 5 europeiska huvudst칛der p친 15 sekunder?'},{t:'Snabbfr친ga!',m:'Vad hette den danska kungens 칬knamn? (Svaret: Kristian Tyrann)'}];
function showPause(){const m=pauseMsgs[Math.floor(Math.random()*pauseMsgs.length)];document.getElementById('pauseTitle').textContent=m.t;document.getElementById('pauseMsg').textContent=m.m;document.getElementById('pauseOverlay').classList.add('show');}
function closePause(){document.getElementById('pauseOverlay').classList.remove('show')}

function checkPrevious(){
  const progress=getProgress();
  if(progress[PAGE_ID]){
    answered=true;
    const btns=document.querySelectorAll('.option-btn');
    btns[CORRECT_ANSWER].classList.add('correct');
    btns.forEach(b=>b.disabled=true);
    document.getElementById('fbCorrect').classList.add('show');
    document.getElementById('nextBtn').classList.remove('locked');
    document.querySelector('.celebration').textContent='Du har redan klarat denna sida!';
    document.querySelector('.celebration').classList.add('show');
  }
}
updatePointsDisplay();updateNav();checkPrevious();
</script>
</body>
</html>
